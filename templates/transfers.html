{% if not transfers %}
  <div class="p-6 text-sm text-base-content/70">
    No active transfers</span>.
  </div>
{% else %}
  <div class="grid gap-4">
    {% for transfer in transfers %}
      <div class="rounded-2xl border border-base-300 bg-base-100 p-4">
        <div class="flex items-center justify-between gap-4">
          <p class="text-sm font-semibold text-base-content">
            {{ transfer.filename or transfer.label_filename or "Transfer" }}
          </p>
          <div class="flex items-center gap-2">
            <span class="badge badge-outline">{{ transfer.status }}</span>
            {% if transfer.container_id %}
              <button
                class="btn btn-ghost btn-sm"
                title="Stop transfer"
                hx-delete="/transfer/{{ transfer.container_id }}"
                hx-trigger="click"
                hx-swap="none"
              >
                <i data-lucide="circle-stop" class="h-4 w-4"></i>
              </button>
            {% endif %}
          </div>
        </div>

        {% if transfer.status == "waiting" %}
          <div class="mt-3 text-sm">
            <p>Code: <span class="font-semibold">{{ transfer.code or "—" }}</span></p>
            <p class="text-xs text-base-content/60">
              Wait time remaining: {{ transfer.waiting_minutes_remaining or 0 }} minutes
            </p>
          </div>
        {% elif transfer.status == "transferring" %}
          <div class="mt-3">
            <p class="text-sm">{{ transfer.progress }}%</p>
            <div class="mt-2 flex flex-wrap items-center gap-3 text-xs text-base-content/60">
              <span>Speed: {{ transfer.speed or "—" }}</span>
              <span>ETA: {{ transfer.eta or "—" }}</span>
              <span>Started: {{ transfer.started_at or transfer.created_at or "—" }}</span>
            </div>
          </div>
        {% else %}
          <p class="mt-3 text-xs text-base-content/60">
            Started: {{ transfer.started_at or transfer.created_at or "—" }}
          </p>
        {% endif %}
      </div>
    {% endfor %}
  </div>
{% endif %}
